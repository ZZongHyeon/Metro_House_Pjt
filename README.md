# Metro_House_Pjt

  <img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white"> 
  <img src="https://img.shields.io/badge/oracle-F80000?style=for-the-badge&logo=oracle&logoColor=white"> 
  <img src="https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white"> 

## ğŸ“¦ ê°œë°œ í™˜ê²½ êµ¬ì¡° ìš”ì•½

| êµ¬ë¶„ | ë‚´ìš©
|-----|-----
| **ê°œë°œ ì–¸ì–´** | Java (JDK 8 ì´ìƒ), JavaScript
| **í”„ë ˆì„ì›Œí¬** | Spring Boot + MyBatis
| **DB** | Oracle 11g ì´ìƒ
| **ë¹Œë“œ ë„êµ¬** | Gradle
| **ë‚´ì¥ WAS** | Spring Boot ë‚´ì¥ Tomcat
| **í˜•ìƒê´€ë¦¬** | Git / GitHub
| **í˜‘ì—… ë„êµ¬** | Jira, Notion


## ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

### ğŸŒ í”„ë¡ íŠ¸ì—”ë“œ (Frontend)

| ê¸°ìˆ  | ì„¤ëª…
|-----|-----
| JSP | ì„œë²„ ì¸¡ì—ì„œ HTMLì„ ìƒì„±í•˜ëŠ” ë Œë”ë§ ê¸°ìˆ <br>ë™ì ì¸ ì›¹ í˜ì´ì§€ êµ¬í˜„ì— ì‚¬ìš©
| js/jQuery | í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— í•„ìš”í•œ ë™ì‘ì²˜ë¦¬, ë™ì  ì½˜í…ì¸  ë¡œë”©<br>AJAXë¥¼ í†µí•œ ë¹„ë™ê¸° í†µì‹ ìœ¼ë¡œ ì¢‹ì•„ìš” ê¸°ëŠ¥ êµ¬í˜„
| CSS | ë°˜ì‘í˜• ë””ìì¸ êµ¬í˜„, ê²Œì‹œíŒ ë° ìƒì„¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ë§ <br>ì¢‹ì•„ìš” ë²„íŠ¼ ì• ë‹ˆë©”ì´ì…˜ ë° ìƒíƒœ í‘œì‹œ íš¨ê³¼
| Font Awesome | ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œ UI ê°œì„ <br>ì¢‹ì•„ìš”, ì¡°íšŒìˆ˜ ë“± ì•„ì´ì½˜ ê°•í™”
| Bootstrap | ë°˜ì‘í˜• UI ì»´í¬ë„ŒíŠ¸ í™œìš©


### âš™ï¸ ë°±ì—”ë“œ (Backend)

| ê¸°ìˆ  | ì„¤ëª…
|-----|-----
| Spring Boot | ìë™ ì„¤ì •ê³¼ ë‚´ì¥ ì„œë²„ë¥¼ í†µí•œ ë¹ ë¥¸ ê°œë°œ í™˜ê²½ êµ¬ì¶•<br>Spring MVC ê¸°ë°˜ RESTful API êµ¬í˜„
| Spring MVC | ì»¨íŠ¸ë¡¤ëŸ¬, ì„œë¹„ìŠ¤ ê³„ì¸µì˜ êµ¬í˜„ì„ ìœ„í•´ ì‚¬ìš©<br>í‘œì¤€ MVC íŒ¨í„´ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¡°í™”
| MyBatis | SQLê³¼ ì„œë²„ ê°ì²´ê°„ ë§¤í•‘ë‹´ë‹¹ ë„êµ¬<br>ì¢‹ì•„ìš” ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•œ ì¿¼ë¦¬ ë§¤í•‘
| Oracle | ëŒ€ê·œëª¨ ë°ì´í„° ê´€ë¦¬ë¥¼ ìœ„í•œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©<br>ê²Œì‹œê¸€, ëŒ“ê¸€, ì¢‹ì•„ìš” ì •ë³´ ì €ì¥
| Spring Security | ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬ (ì„ íƒì )


### ğŸ› ï¸ ê°œë°œ ë„êµ¬ (Development Tools)

| ë„êµ¬ | ì‚¬ìš© ëª©ì 
|-----|-----
| Visual Studio Code | JS, CSS, í”„ë¡ íŠ¸ ë“± ì½”ë“œ ì‘ì„±ìš© ì—ë””í„°
| IntelliJ IDEA/STS | Spring Boot ê¸°ë°˜ í”„ë¡œì íŠ¸ ê°œë°œ í™˜ê²½
| Jira | ì´ìŠˆ ê´€ë¦¬ ë° êµ¬ì²´ì ì¸ ì¼ì • ê³„íš ìˆ˜ë¦½ì„ ìœ„í•œ í˜‘ì—… ë„êµ¬
| GitHub | ì½”ë“œ ë²„ì „ ê´€ë¦¬ ë° íŒ€ í˜‘ì—…
| Postman | API í…ŒìŠ¤íŠ¸


<details>
  <summary>ê²Œì‹œê¸€ ë”ë¯¸ê°’ ì‚½ì…</summary>
  <pre><code>
BEGIN
  FOR i IN 1..300 LOOP
    INSERT INTO board (boardNumber, userName, boardTitle, boardContent, boardWriteDate, boardViews)
    VALUES (i, 'ì‚¬ìš©ì'||i, 'ì œëª©'||i, 'ë‚´ìš©'||i, SYSDATE, 0);
    
    IF MOD(i, 100) = 0 THEN
      COMMIT;
    END IF;
  END LOOP;
  COMMIT;
END;
  </code></pre>
</details>


<details>
  <summary>ì¿¼ë¦¬(2025-04-27)</summary>
  <pre><code>
GRANT CREATE SESSION, CREATE TABLE, CREATE VIEW, CREATE SEQUENCE, 
      CREATE SYNONYM, CREATE PROCEDURE, CREATE TRIGGER, CREATE MATERIALIZED VIEW 
TO METRO_HOUSE;
GRANT SELECT ANY TABLE, INSERT ANY TABLE, UPDATE ANY TABLE, DELETE ANY TABLE
TO METRO_HOUSE;
ALTER USER METRO_HOUSE DEFAULT TABLESPACE USERS;
ALTER USER METRO_HOUSE QUOTA UNLIMITED ON USERS;


CREATE TABLE USERINFO (
userNumber      NUMBER PRIMARY KEY,
userId          VARCHAR2(100),
userPw          VARCHAR2(100),
userName        VARCHAR2(100),
userTel         VARCHAR2(20),
userEmail       VARCHAR2(200),
userBirth       VARCHAR2(50),
userZipCode     VARCHAR2(50),
userAddress     VARCHAR2(300),
userDetailAddress VARCHAR2(500),
userAdmin       NUMBER DEFAULT 0,
userRegdate     DATE DEFAULT SYSDATE
);


CREATE TABLE BOARD (
boardNumber     NUMBER PRIMARY KEY,
userNumber      NUMBER,
userName        VARCHAR2(50),
boardTitle      VARCHAR2(1000),
boardContent    VARCHAR2(4000),
boardWriteDate  DATE DEFAULT SYSDATE,
boardHit        NUMBER DEFAULT 0,
boardViews      NUMBER DEFAULT 0,
boardLikes      NUMBER DEFAULT 0,
FOREIGN KEY (userNumber) REFERENCES USERINFO(userNumber)ON DELETE CASCADE
);


CREATE TABLE board_likes (
boardNumber number,
userNumber number,
PRIMARY KEY (boardNumber, userNumber)
);


CREATE TABLE BOARD_COMMENT (
commentNumber       NUMBER PRIMARY KEY,
commentSubNumber    NUMBER,
commentSubStepNumber NUMBER,
boardNumber         NUMBER,
userNumber          NUMBER,
userName            VARCHAR2(50),
commentContent      VARCHAR2(4000),
commentWriteDate    DATE DEFAULT SYSDATE
);


ALTER TABLE BOARD_COMMENT
ADD CONSTRAINT fk_comment_board
FOREIGN KEY (boardNumber)
REFERENCES BOARD(boardNumber)
ON DELETE CASCADE;


ALTER TABLE BOARD_COMMENT
ADD CONSTRAINT fk_comment_user
FOREIGN KEY (userNumber)
REFERENCES USERINFO(userNumber)
ON DELETE CASCADE;
DESC board_comment;


create table apartmentinfo(
    apartmentId number primary key,
    sggcd VARCHAR2(10),
    umdnm VARCHAR2(100),
    aptnm VARCHAR2(200),
    jibun VARCHAR2(100),
    excluusear VARCHAR2(50),
    dealYear VARCHAR2(4),
    dealMonth VARCHAR2(2),
    dealDay VARCHAR2(2),
    dealAmount VARCHAR2(100),
    floor VARCHAR2(10),
    buildYear VARCHAR2(4),
    cdealType VARCHAR2(50),
    cdealDay VARCHAR2(50),
    dealingGbn VARCHAR2(50),
    estateAgentSggnm VARCHAR2(100),
    rgstDate VARCHAR2(50),
    aptDong VARCHAR2(50),
    slerGbn VARCHAR2(50),
    buyerGbn VARCHAR2(50),
    landLeaseHoldGbn VARCHAR2(50),
    aptSeq VARCHAR2(50),
    bonbun VARCHAR2(50),
    bubun VARCHAR2(50),
    landCd VARCHAR2(50),
    roadNm VARCHAR2(200),
    roadNmBonbun VARCHAR2(50),
    roadNmBubun VARCHAR2(50),
    roadNmCd VARCHAR2(50),
    roadNmSeq VARCHAR2(50),
    roadNmSggcd VARCHAR2(50),
    roadNmBcd VARCHAR2(50),
    umdcd VARCHAR2(50),
    lat NUMBER(12,8),
    lng NUMBER(12,8),
    subwayStation VARCHAR2(100),
    subwayDistance VARCHAR2(50)
);

-- ìœ„ë„/ê²½ë„ì— ë³µí•© ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_apartmentinfo_latlng ON APARTMENTINFO(lat, lng);


CREATE SEQUENCE seq_apartmentinfo
    START WITH 1
    INCREMENT BY 1
    NOCACHE
    NOCYCLE;
create table apartment_favorite(
    favoriteId number primary key,
    apartmentId number,
    userNumber number,
    createdAt date default sysdate,
    lat NUMBER(12,8),
    lng NUMBER(12,8),
    dealamount varchar2(100),

    FOREIGN KEY (apartmentId) REFERENCES APARTMENTINFO(apartmentId)ON DELETE CASCADE,
    FOREIGN KEY (userNumber) REFERENCES USERINFO(userNumber)ON DELETE CASCADE
);
CREATE SEQUENCE seq_apartment_favorite
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;



-------------------------------------------------------------------------ì•„íŒŒíŠ¸ í(ë…„,ì›”,ì‹œêµ°êµ¬ì½”ë“œ)
CREATE TABLE "METRO_HOUSE"."APARTMENTINFO_QUEUE" 
   (   "QUEUE_ID" NUMBER, 
   "APARTMENTID" NUMBER, 
   "SGGCD" VARCHAR2(10), 
   "UMDNM" VARCHAR2(100), 
   "APTNM" VARCHAR2(200), 
   "JIBUN" VARCHAR2(100), 
   "EXCLUUSEAR" VARCHAR2(50), 
   "DEALYEAR" VARCHAR2(4), 
   "DEALMONTH" VARCHAR2(2), 
   "DEALDAY" VARCHAR2(2), 
   "DEALAMOUNT" VARCHAR2(100), 
   "FLOOR" VARCHAR2(10), 
   "BUILDYEAR" VARCHAR2(4), 
   "CDEALTYPE" VARCHAR2(50), 
   "CDEALDAY" VARCHAR2(50), 
   "DEALINGGBN" VARCHAR2(50), 
   "ESTATEAGENTSGGNM" VARCHAR2(100), 
   "RGSTDATE" VARCHAR2(50), 
   "APTDONG" VARCHAR2(50), 
   "SLERGBN" VARCHAR2(50), 
   "BUYERGBN" VARCHAR2(50), 
   "LANDLEASEHOLDGBN" VARCHAR2(50), 
   "APTSEQ" VARCHAR2(50), 
   "BONBUN" VARCHAR2(50), 
   "BUBUN" VARCHAR2(50), 
   "LANDCD" VARCHAR2(50), 
   "ROADNM" VARCHAR2(200), 
   "ROADNMBONBUN" VARCHAR2(50), 
   "ROADNMBUBUN" VARCHAR2(50), 
   "ROADNMCD" VARCHAR2(50), 
   "ROADNMSEQ" VARCHAR2(50), 
   "ROADNMSGGCD" VARCHAR2(50), 
   "ROADNMBCD" VARCHAR2(50), 
   "UMDCD" VARCHAR2(50), 
   "LAT" NUMBER(12,8), 
   "LNG" NUMBER(12,8), 
   "SUBWAYSTATION" VARCHAR2(100), 
   "SUBWAYDISTANCE" VARCHAR2(50), 
   "PROCESSED" CHAR(1) DEFAULT 'N'
   )
CREATE INDEX idx_apartmentqueue_id ON APARTMENTINFO_QUEUE(apartmentid);

----------------------------------------------------------------------------------------------apartment procedure

create or replace PROCEDURE process_apartmentinfo_queue IS
    CURSOR cur IS
  SELECT * FROM APARTMENTINFO_QUEUE WHERE PROCESSED = 'N' FOR UPDATE SKIP LOCKED;
BEGIN
-------------------------------------------------------------------
    -- [ì—¬ê¸°] ì»¤ì„œ ë£¨í”„ ì „ì— í•„ìš”í•œ ë™ì  í…Œì´ë¸”ì„ ë¯¸ë¦¬ ëª¨ë‘ ìƒì„±
    -------------------------------------------------------------------
    DECLARE
        CURSOR tab_cur IS
            SELECT DISTINCT DEALYEAR, DEALMONTH, SGGCD
              FROM APARTMENTINFO_QUEUE
             WHERE PROCESSED = 'N';
        v_table_name VARCHAR2(100);
        v_count      NUMBER;
        v_sql        VARCHAR2(4000);
    BEGIN
        FOR rec IN tab_cur LOOP
            v_table_name := 'A_' || rec.DEALYEAR || '_' || rec.DEALMONTH || '_' || rec.SGGCD;
            SELECT COUNT(*) INTO v_count FROM user_tables WHERE table_name = UPPER(v_table_name);
            IF v_count = 0 THEN
                v_sql := 'CREATE TABLE ' || v_table_name || ' ( ... )'; -- í…Œì´ë¸” ì •ì˜ ìƒëµ
                EXECUTE IMMEDIATE v_sql;
            END IF;
        END LOOP;
    END;
    -------------------------------------------------------------------
    -- [ì—¬ê¸°ê¹Œì§€] ë¯¸ë¦¬ í…Œì´ë¸” ìƒì„±
    -------------------------------------------------------------------
    FOR rec IN cur LOOP
        -- ë™ì  í…Œì´ë¸”ëª… ìƒì„±
        DECLARE
            v_table_name VARCHAR2(100);
            v_sql        VARCHAR2(4000);
            v_count      NUMBER;
            v_dup_count  NUMBER;
        BEGIN
            v_table_name := 'A_' || rec.DEALYEAR || '_' || rec.DEALMONTH || '_' || rec.SGGCD;

            -- í…Œì´ë¸” ì¡´ì¬ ì—¬ë¶€ í™•ì¸
            SELECT COUNT(*) INTO v_count FROM user_tables WHERE table_name = UPPER(v_table_name);

            IF v_count = 0 THEN
                v_sql := 'CREATE TABLE ' || v_table_name || ' (
                    APARTMENTID         NUMBER PRIMARY KEY,
                    SGGCD               VARCHAR2(10),
                    UMDNM               VARCHAR2(100),
                    APTNM               VARCHAR2(200),
                    JIBUN               VARCHAR2(100),
                    EXCLUUSEAR          VARCHAR2(50),
                    DEALYEAR            VARCHAR2(4),
                    DEALMONTH           VARCHAR2(2),
                    DEALDAY             VARCHAR2(2),
                    DEALAMOUNT          VARCHAR2(100),
                    FLOOR               VARCHAR2(10),
                    BUILDYEAR           VARCHAR2(4),
                    CDEALTYPE           VARCHAR2(50),
                    CDEALDAY            VARCHAR2(50),
                    DEALINGGBN          VARCHAR2(50),
                    ESTATEAGENTSGGNM    VARCHAR2(100),
                    RGSTDATE            VARCHAR2(50),
                    APTDONG             VARCHAR2(50),
                    SLERGBN             VARCHAR2(50),
                    BUYERGBN            VARCHAR2(50),
                    LANDLEASEHOLDGBN    VARCHAR2(50),
                    APTSEQ              VARCHAR2(50),
                    BONBUN              VARCHAR2(50),
                    BUBUN               VARCHAR2(50),
                    LANDCD              VARCHAR2(50),
                    ROADNM              VARCHAR2(200),
                    ROADNMBONBUN        VARCHAR2(50),
                    ROADNMBUBUN         VARCHAR2(50),
                    ROADNMCD            VARCHAR2(50),
                    ROADNMSEQ           VARCHAR2(50),
                    ROADNMSGGCD         VARCHAR2(50),
                    ROADNMBCD           VARCHAR2(50),
                    UMDCD               VARCHAR2(50),
                    LAT                 NUMBER(12,8),
                    LNG                 NUMBER(12,8),
                    SUBWAYSTATION       VARCHAR2(100),
                    SUBWAYDISTANCE      VARCHAR2(50)
                )';
                EXECUTE IMMEDIATE v_sql;
            END IF;

            -- ì¤‘ë³µ ì²´í¬
            v_sql := 'SELECT COUNT(*) FROM ' || v_table_name || ' WHERE APARTMENTID = :1';
            EXECUTE IMMEDIATE v_sql INTO v_dup_count USING rec.APARTMENTID;

            IF v_dup_count = 0 THEN
                -- ë°ì´í„° INSERT
                v_sql := 'INSERT INTO ' || v_table_name || ' (
                    APARTMENTID, SGGCD, UMDNM, APTNM, JIBUN, EXCLUUSEAR, DEALYEAR, DEALMONTH, DEALDAY,
                    DEALAMOUNT, FLOOR, BUILDYEAR, CDEALTYPE, CDEALDAY, DEALINGGBN, ESTATEAGENTSGGNM,
                    RGSTDATE, APTDONG, SLERGBN, BUYERGBN, LANDLEASEHOLDGBN, APTSEQ, BONBUN, BUBUN,
                    LANDCD, ROADNM, ROADNMBONBUN, ROADNMBUBUN, ROADNMCD, ROADNMSEQ, ROADNMSGGCD,
                    ROADNMBCD, UMDCD, LAT, LNG, SUBWAYSTATION, SUBWAYDISTANCE
                ) VALUES (
                    :1, :2, :3, :4, :5, :6, :7, :8, :9, :10, :11, :12, :13, :14, :15, :16, :17, :18, :19, :20, :21, :22, :23, :24, :25, :26, :27, :28, :29, :30, :31, :32, :33, :34, :35, :36, :37
                )';

                EXECUTE IMMEDIATE v_sql USING
                    rec.APARTMENTID, rec.SGGCD, rec.UMDNM, rec.APTNM, rec.JIBUN, rec.EXCLUUSEAR, rec.DEALYEAR, rec.DEALMONTH, rec.DEALDAY,
                    rec.DEALAMOUNT, rec.FLOOR, rec.BUILDYEAR, rec.CDEALTYPE, rec.CDEALDAY, rec.DEALINGGBN, rec.ESTATEAGENTSGGNM,
                    rec.RGSTDATE, rec.APTDONG, rec.SLERGBN, rec.BUYERGBN, rec.LANDLEASEHOLDGBN, rec.APTSEQ, rec.BONBUN, rec.BUBUN,
                    rec.LANDCD, rec.ROADNM, rec.ROADNMBONBUN, rec.ROADNMBUBUN, rec.ROADNMCD, rec.ROADNMSEQ, rec.ROADNMSGGCD,
                    rec.ROADNMBCD, rec.UMDCD, rec.LAT, rec.LNG, rec.SUBWAYSTATION, rec.SUBWAYDISTANCE;
            END IF;

            -- ì²˜ë¦¬ ì™„ë£Œ í‘œì‹œ
            UPDATE APARTMENTINFO_QUEUE SET PROCESSED = 'Y' WHERE CURRENT OF cur;
        END;
    END LOOP;
END;
----------------------------------------------------------------------------------------------apartment trriger
create or replace TRIGGER trg_apartmentinfo_insert
AFTER INSERT ON apartmentinfo
FOR EACH ROW
BEGIN
  INSERT INTO apartmentinfo_queue (
    apartmentId, sggcd, umdnm, aptnm, jibun, excluusear,
    dealYear, dealMonth, dealDay, dealAmount, floor, buildYear, cdealType, cdealDay,
    dealingGbn, estateAgentSggnm, rgstDate, aptDong, slerGbn, buyerGbn,
    landLeaseHoldGbn, aptSeq, bonbun, bubun, landCd, roadNm, roadNmBonbun,
    roadNmBubun, roadNmCd, roadNmSeq, roadNmSggcd, roadNmBcd, umdcd,
    lat, lng, subwayStation, subwayDistance
  ) VALUES (
    :NEW.apartmentId, :NEW.sggcd, :NEW.umdnm, :NEW.aptnm, :NEW.jibun, :NEW.excluusear,
    :NEW.dealYear, :NEW.dealMonth, :NEW.dealDay, :NEW.dealAmount, :NEW.floor, :NEW.buildYear, :NEW.cdealType, :NEW.cdealDay,
    :NEW.dealingGbn, :NEW.estateAgentSggnm, :NEW.rgstDate, :NEW.aptDong, :NEW.slerGbn, :NEW.buyerGbn,
    :NEW.landLeaseHoldGbn, :NEW.aptSeq, :NEW.bonbun, :NEW.bubun, :NEW.landCd, :NEW.roadNm, :NEW.roadNmBonbun,
    :NEW.roadNmBubun, :NEW.roadNmCd, :NEW.roadNmSeq, :NEW.roadNmSggcd, :NEW.roadNmBcd, :NEW.umdcd,
    :NEW.lat, :NEW.lng, :NEW.subwayStation, :NEW.subwayDistance
  );
END;


  </code></pre>
</details>
